<div class="container-fluid">
  <div class="row">
    <div class="col-12 mb-3">
      <p-card>
        <form class="form-row mb-3"
              [formGroup]="countBarForm"
              (ngSubmit)="onSubmitCountBarFilter()">
          <ng-dropdown formControlName="grade" class="col-sm-6 col-md-4 col-xl mb-2" label="مقطع"></ng-dropdown>
          <ng-dropdown formControlName="gender_id" class="col-sm-6 col-md-4 col-xl mb-2" label="جنسیت"
                       [options]="genders"></ng-dropdown>
          <ng-dropdown formControlName="major" class="col-sm-6 col-md-4 col-xl mb-2" label="رشته"></ng-dropdown>
          <ng-dropdown formControlName="stage" class="col-sm-6 col-md-4 col-xl mb-2" label="پایه"></ng-dropdown>
          <ng-dropdown formControlName="district_id" class="col-sm-6 col-md-4 col-xl mb-2" label="شهر"></ng-dropdown>
          <ng-dropdown formControlName="province_id" class="col-sm-6 col-md-4 col-xl mb-2" label="استان"></ng-dropdown>
          <ng-jalali-datepicker formControlName="start_time" [showIcon]="false" [showClear]="true"
                                class="col-sm-6 col-md-4 col-xl mb-2"
                                label="از تاریخ"></ng-jalali-datepicker>
          <ng-jalali-datepicker formControlName="end_time" [showClear]="true" [showIcon]="false"
                                class="col-sm-6 col-md-4 col-xl mb-2"
                                label="تا تاریخ"></ng-jalali-datepicker>
          <div class="d-flex align-items-center col-md-4 col-xl mb-2">
            <ng-button
              type="submit"
              appearance="outlined"
              color="success"
              size="md"
              [full]="true"
              [disabled]="countBarForm.hasError('invalidDate')"
              label="اعمال تغییرات">
            </ng-button>
            <ng-button
              *ngIf="countBarFilterEnabled"
              appearance="outlined"
              color="danger"
              pTooltip="حذف فیلتر"
              tooltipPosition="top"
              class="mr-2"
              size="md"
              [rounded]="true"
              icon="pi pi-times"
              (onClick)="clearCountBarFilter()">
            </ng-button>
          </div>
        </form>
        <div class="row">
          <div class="mt-2 col-sm-6 col-md-4 col-lg">
            <ng-figure title="معلمان" [sub]="countBar.teachers"></ng-figure>
          </div>
          <div class="mt-2 col-sm-6 col-md-4 col-lg">
            <ng-figure title="دانش آموزان" [sub]="countBar.students"></ng-figure>
          </div>
          <div class="mt-2 col-sm-6 col-md-4 col-lg">
            <ng-figure title="آزمون" [sub]="countBar.exams"></ng-figure>
          </div>
          <div class="mt-2 col-sm-6 col-md-4 col-lg">
            <ng-figure title="تکالیف" [sub]="countBar.homeworks"></ng-figure>
          </div>
          <div class="mt-2 col-sm-6 col-md-4 col-lg">
            <ng-figure title="درسنامه" [sub]="countBar.tutorials"></ng-figure>
          </div>
          <div class="mt-2 col-sm-6 col-md-4 col-lg">
            <ng-figure title="پسر" [sub]="countBar.boys"></ng-figure>
          </div>
          <div class="mt-2 col-sm-6 col-md-4 col-lg">
            <ng-figure title="دختر" [sub]="countBar.girls"></ng-figure>
          </div>
        </div>
      </p-card>
    </div>

    <div class="col-lg-4 mb-3">
      <p-card>
        <div class="d-flex justify-content-between mb-4">
          <h4 class="mb-0"><img src="assets/images/exam.png" class="ml-2">آزمون</h4>
          <ng-button routerLink="/exam" appearance="outlined" icon="pi pi-chevron-left"
                     label="نمایش جزئیات"></ng-button>
        </div>
        <div class="row">
          <div class="col-12">
            <ng-figure title="برگزار شده" sub="0"></ng-figure>
          </div>
          <!--          <div class="mt-2 col-md-4 col-lg-12 col-xl-4 col-lg">-->
          <!--            <ng-figure title="درحال برگزاری" sub="0"></ng-figure>-->
          <!--          </div>-->
          <!--          <div class="mt-2 col-md-4 col-lg-12 col-xl-4 col-lg">-->
          <!--            <ng-figure title="لغو شده ها" sub="0"></ng-figure>-->
          <!--          </div>-->
          <!--          <div class="mt-2 col-md-4 col-lg-12 col-xl-4 col-lg">-->
          <!--            <ng-figure title="انجام شده" sub="0"></ng-figure>-->
          <!--          </div>-->
        </div>
      </p-card>
    </div>
    <div class="col-lg-4 mb-3">
      <p-card>
        <div class="d-flex justify-content-between mb-4">
          <h4 class="mb-0"><img src="assets/images/homework.png" class="ml-2">تکالیف</h4>
          <ng-button routerLink="/homework" appearance="outlined" icon="pi pi-chevron-left"
                     label="نمایش جزئیات"></ng-button>
        </div>
        <div class="row">
          <div class="col-12">
            <ng-figure title="ایجاد شده" sub="0"></ng-figure>
          </div>
          <!--          <div class="mt-2 col-md-4 col-lg-12 col-xl-4 col-lg">-->
          <!--            <ng-figure title="درحال برگزاری" sub="0"></ng-figure>-->
          <!--          </div>-->
          <!--          <div class="mt-2 col-md-4 col-lg-12 col-xl-4 col-lg">-->
          <!--            <ng-figure title="لغو شده ها" sub="0"></ng-figure>-->
          <!--          </div>-->
          <!--          <div class="mt-2 col-md-4 col-lg-12 col-xl-4 col-lg">-->
          <!--            <ng-figure title="انجام شده" sub="0"></ng-figure>-->
          <!--          </div>-->
        </div>
      </p-card>
    </div>
    <div class="col-lg-4 mb-3">
      <p-card>
        <div class="d-flex justify-content-between mb-4">
          <h4 class="mb-0"><img src="assets/images/tutorial.png" class="ml-2">درسنامه</h4>
          <ng-button routerLink="/tutorial" appearance="outlined" icon="pi pi-chevron-left"
                     label="نمایش جزئیات"></ng-button>
        </div>
        <div class="row">
          <div class="col-12">
            <ng-figure title="بارگزاری شده" sub="0"></ng-figure>
          </div>
          <!--          <div class="mt-2 col-md-4 col-lg-12 col-xl-4 col-lg">-->
          <!--            <ng-figure title="درحال برگزاری" sub="0"></ng-figure>-->
          <!--          </div>-->
          <!--          <div class="mt-2 col-md-4 col-lg-12 col-xl-4 col-lg">-->
          <!--            <ng-figure title="لغو شده ها" sub="0"></ng-figure>-->
          <!--          </div>-->
          <!--          <div class="mt-2 col-md-4 col-lg-12 col-xl-4 col-lg">-->
          <!--            <ng-figure title="انجام شده" sub="0"></ng-figure>-->
          <!--          </div>-->
        </div>
      </p-card>
    </div>

    <div class="col-12 mb-3 iran-map">
      <p-card>
        <h5>میزان استفاده مدارس از LMS</h5>
        <div class="row">
          <div class="order-1 mb-4 col-md-6 col-lg-3">
            <div class="border bg-white rounded p-4 shadow">
              <h6>فیلتر</h6>
              <form [formGroup]="usageForm" (ngSubmit)="onSubmitUsageFilter()">
                <ng-dropdown formControlName="school_gender" class="mt-4" label="جنسیت"
                             [options]="schoolGenders"></ng-dropdown>
                <ng-dropdown formControlName="province_id" [options]="provinces" class="mt-3"
                             label="استان" (onChange)="onStateChange($event)"></ng-dropdown>
                <ng-dropdown formControlName="district_id" [options]="districts" class="mt-3"
                             label="منطقه"></ng-dropdown>
                <ng-dropdown formControlName="school_id" class="mt-3" label="مدرسه"></ng-dropdown>
                <ng-dropdown formControlName="school_type" class="mt-3" label="نوع مدرسه"
                             [options]="schoolTypes"></ng-dropdown>
                <ng-dropdown formControlName="grade" class="mt-3" label="مقطع"></ng-dropdown>
                <div class="d-flex mt-5">
                  <ng-button [full]="true" size="md" appearance="outlined" color="success"
                             type="submit"
                             class="flex-grow-1"
                             label="اعمال تغییرات"></ng-button>
                  <ng-button size="md" appearance="outlined" color="danger"
                             *ngIf="usageFilterEnabled"
                             (onClick)="clearUsageFilter()"
                             class="mr-2"
                             icon="pi pi-refresh"></ng-button>
                </div>
              </form>
            </div>
          </div>
          <div class="order-3 order-md-4 order-lg-2 col-md-12 col-lg-6">
            <ng-pinch-zoom overflow="visible">
              <ng-iran-map [multiple]="false"></ng-iran-map>
            </ng-pinch-zoom>
          </div>
          <div class="order-2 mb-4 order-lg-3 col-md-6 col-lg-3">
            <div class="border bg-white rounded p-4 shadow">
              <div class="text-center">
                <h5 class="text-muted mb-4">مجموع‌ استفاده از LMS</h5>
                <h3 class="mb-4">{{usage.total}}</h3>
              </div>
              <div class="d-flex align-items-center justify-content-between bg-light py-1 mb-2">
                <span>آزمون ها</span>
                <span class="text-dark">{{usage.exams | withComma}}</span>
              </div>
              <div class="d-flex align-items-center justify-content-between bg-light py-1 mb-2">
                <span>تکالیف</span>
                <span class="text-dark">{{usage.homeworks | withComma}}</span>
              </div>
              <div class="d-flex align-items-center justify-content-between bg-light py-1 mb-2">
                <span>درسنامه</span>
                <span class="text-dark">{{usage.tutorials | withComma}}</span>
              </div>
              <div class="d-flex align-items-center justify-content-between bg-light py-1 mb-2">
                <span>تعداد مدارس</span>
                <span class="text-dark">{{usage.schools | withComma}}</span>
              </div>
              <div class="d-flex align-items-center justify-content-between bg-light py-1 mb-2">
                <span>دخترانه</span>
                <span class="text-dark">{{usage.f_schools | withComma}}</span>
              </div>
              <div class="d-flex align-items-center justify-content-between bg-light py-1">
                <span>پسرانه</span>
                <span class="text-dark">{{usage.m_schools | withComma}}</span>
              </div>
            </div>
          </div>
        </div>
      </p-card>
    </div>
  </div>
</div>
